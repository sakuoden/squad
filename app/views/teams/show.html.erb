<!-- チーム詳細画面全体の箱 -->
<div class="teams_show_box">

	<!-- チーム詳細の左の箱 -->
	<div class="teams_show_left_box clearfix">

		<!-- チーム詳細の左の箱の画像の位置 -->
		<div class="teams_show_left_box_image_position">
			<%= attachment_image_tag @team, :team_image, :fill, 300, 300, fallback: "/images/no_image.jpg", class: "teams_show_box_row1_image" %>
		</div>
		<!-- チーム詳細左の箱の画像の位置fin -->

		<!-- チーム詳細の左側の箱のチーム名 -->
		<div class="teams_show_left_box_team_name">
			<%= @team.team_name %>
		</div>
		<!-- チーム詳細の左側の箱のチーム名fin -->


		<!-- チーム詳細画面のの左側のボタンの行 -->
		<div class="teams_show_left_box_btn_row">

			<%= link_to "/teams/#{@team.id}", class:"teams_show_left_box_btn_row_link" do %>
				<div class="teams_show_left_box_btn teams_show_left_box_btn_active">投稿</div>
			<% end %>

			<%= link_to "/teams/#{@team.id}/member", class:"teams_show_left_box_btn_row_link" do %>
				<div class="teams_show_left_box_btn">メンバー</div>
			<% end %>

			<%= link_to "/teams/#{@team.id}", class:"teams_show_left_box_btn_row_link" do %>
				<div class="teams_show_left_box_btn">トーク</div>
			<% end %>

		</div>
		<!-- チーム詳細画面のの左側のボタンの行fin -->


	</div>
	<!-- チーム詳細の左の箱fin -->




		<!-- pjaxで入れ替える全体の箱 -->
		<main id="barba-wrapper">
		<div class="barba-container">

		<!-- チーム詳細画面の右側の箱 -->
		<div class="teams_show_box_right_box">
			<% @posts.each do |post| %>

				<%= form_for(@post_comment, data: {remote: true}) do |f| %>

					<!-- チーム詳細画面で投稿した内容 -->
					<div class="teams_show_right_box_post">

							<!-- チーム詳細画面で投稿した人 -->
							<div class="teams_show_right_box_post_author clearfix">
								<%= attachment_image_tag post.user, :image,  :fill, 40, 40, fallback: "no_image.jpg", class:"teams_show_rihgt_box_post_author_image" %>
								<div class="teams_show_right_box_post_user_name"><%= post.user.name %></div>
							</div>
							<!-- チーム詳細画面で投稿した人 -->


							<!-- チーム詳細画面で投稿した投稿画像 -->
							<%= attachment_image_tag post, :post_image,  :fill, 300, 300, fallback: "no_image.jpg", class:"teams_show_rihgt_box_post_image" %>
							<!-- チーム詳細画面で投稿した投稿画像fin -->


							<!-- チーム詳細画面で投稿した内容へのいいね、コメントボタンの箱 -->
							<div class="teams_show_right_box_post_good_comment_box">

								<%= render partial: 'teams/like_position', locals: {post: post} %>

									<label for="teams_show_right_box_post_comment_form_id">
										<i class="far fa-comment"></i>
									</label>
							</div>
							<!-- チーム詳細画面で投稿した内容へのいいね、コメントボタンの箱fin -->


							<!-- チーム詳細画面で投稿した投稿内容 -->
							<div class="teams_show_right_box_post_content">
								<%= post.post_content %>
							</div>
							<!-- チーム詳細画面で投稿した投稿内容fin -->


							<!-- チーム詳細画面で投稿した内容に対するコメント -->
							<div class="teams_show_right_box_post_content_comment">

								<!-- チーム詳細画面の投稿内容に対するコメント1つ1つ -->
								<div class="teams_show_right_box_content_one_comment">
									<%= render partial: 'teams/comment_position', locals: {post: post} %>
								</div>
								<!-- チーム詳細画面の投稿内容に対するコメント1つ1つfin -->

							</div>
							<!-- チーム詳細画面で投稿した内容に対するコメントfin -->


							<!-- チーム詳細画面のコメント入力欄 -->
							<div class="teams_show_right_box_post_comment_form_position clearfix">
								<%= f.text_field :post_comment, placeholder: "コメントを入力", class:"teams_show_right_box_post_comment_form", id:"teams_show_right_box_post_comment_form_id" %>
								<div class="teams_show_right_box_post_btn_position">
									<%= f.hidden_field :post_id, :value => post.id %>
									<%= button_tag type:"submit", class:"teams_show_right_box_post_btn" do %>
										<i class="fab fa-telegram-plane"></i>
									<% end %>

								</div>
							</div>
							<!-- チーム詳細画面のコメント入力欄fin -->



					</div>
					<!-- チーム詳細画面で投稿した内容fin -->

				<% end %>
				<!-- form_forのend -->


					<!-- チーム詳細画面のモーダル画面 -->
					<div class="teams_show_favorite_count_modal_">
					</div>
					<!-- チーム詳細画面のモーダル画面fin -->

			<% end %>
			<!-- @postのeachのend -->


		</div>
		<!-- チーム詳細画面の右側の箱fin -->

		</div>
		</main>
		<!-- pjaxで入れ替える全体の箱fin -->



<!-- チーム詳細画面全体の箱fin -->
</div>


<% if @team.members.where(user_id: current_user.id).exists? %>
	<!-- チーム詳細画面の画像投稿ボタン -->
	<%= link_to new_post_path(team_id: @team.id), class:"teams_show_new_post_btn_link" do %>
		<div class="teams_show_new_post_btn">
			<i class="fas fa-camera"></i>
			<p>投稿</p>
		</div>
	<% end %>
	<!-- チーム詳細画面の投稿ボタンfin -->
<% end %>






<script>
	$(document).ready(function(){

		Barba.Pjax.start();

		var FadeTransition = Barba.BaseTransition.extend({
  start: function() {

    Promise
      .all([this.newContainerLoading, this.fadeOut()])
      .then(this.fadeIn.bind(this));
  },

  fadeOut: function() {
    return $(this.oldContainer).animate({ opacity: 0 }).promise();
  },

  fadeIn: function() {

    var _this = this;
    var $el = $(this.newContainer);

    $(this.oldContainer).hide();

    $el.css({
      visibility : 'visible',
      opacity : 0
    });

    $el.animate({ opacity: 1 }, 400, function() {
      _this.done();
    });
  }
});

Barba.Pjax.getTransition = function() {
  return FadeTransition;
};

		$('.teams_show_left_box_btn').click(function(){
			$('.teams_show_left_box_btn').removeClass('teams_show_left_box_btn_active');
			$(this).addClass('teams_show_left_box_btn_active');

		});

	});
</script>





